# Caravel User Project

[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](https://opensource.org/licenses/Apache-2.0) [![UPRJ_CI](https://github.com/efabless/caravel_project_example/actions/workflows/user_project_ci.yml/badge.svg)](https://github.com/efabless/caravel_project_example/actions/workflows/user_project_ci.yml) [![Caravel Build](https://github.com/efabless/caravel_project_example/actions/workflows/caravel_build.yml/badge.svg)](https://github.com/efabless/caravel_project_example/actions/workflows/caravel_build.yml)

| :exclamation: Important Note            |
|-----------------------------------------|


## Project description and development: https://github.com/openpowerfoundation/toy-sram

This project is a test site for a custom 10T array cell design.  It is built as a 32x32 2R1W regfile and includes Wishbone and scan I/O access.

### Notes

* https://docs.google.com/document/d/1Y7LuP_0dJ_vmD8G_Twc6qc97fj7aW5pRV5nAjN2oOUk/edit#heading=h.hdj6ymredbfl

### Sim

* test scan and array I/O and procedures

```
make verify-toysram_scan-rtl
...
[00000004] Test Enable is inactive.
[00000080] Releasing reset.
[00002500] ...tick...
[00005000] ...tick...
[00007500] ...tick...
[00010000] ...tick...
[00012500] ...tick...
[00015000] ...tick...
[00015000] Setting Test Enable.
[00015000] Test Enable is active.
[00015003] Writing scan reg: 0123456789abcdeffedcba9876543210
[00015007] Scanning in...
[00016031] Scan complete.
[00016035] Scanning out...
[00017059] Scan complete.
[00017059] Read scan reg: 0123456789abcdeffedcba9876543210
[00017059] Scan good.

[00017063] Resetting array.
[00017107] Array cmds: R0[0], R1[1], W0[0]=08675309
[00017111] Writing scan reg: 07fffffff87fffffffc010cea613babe
[00017111] R0[00]=ffffffff  R1[01]=ffffffff  W0[0]=08675309
[00017115] Scanning in...
[00017500] ...tick...
[00018139] Scan complete.
[00018139] R0_EN=1, R1_EN=1, W0_EN=1
[00018143] Clocking array (set up input regs)...
[00018151] Clocking array (clock array)...
[00018159] R0_EN=1, R1_EN=1, W0_EN=0
[00018167] Scanning out...
[00019191] Scan complete.
[00019191] Read scan reg: 0000000000400000000010cea613babe
[00019191] R0[00]=00000000  R1[01]=00000000 W0[0]=08675309
[00019195] Scanning in (restore)...
[00020000] ...tick...
[00020219] Scan complete.
[00020219] Clocking array...
[00020231] Scanning out nondestructively...
[00021255] Scan complete.
[00021255] Read scan reg: 0000000000400000000010cea613babe
[00021255] R0[00]=00000000  R1[01]=00000000 W0[0]=08675309
[00021259] Scanning out...
[00022283] Scan complete.
[00022283] Read scan reg: 0000000000400000000010cea613babe
[00022283] R0[00]=00000000  R1[01]=00000000 W0[0]=08675309
[00022283] Nondestructive scan good.

[00022291] Scanning in (restore)...
[00022500] ...tick...
[00023315] Scan complete.
[00023315] Clocking array...
[00023327] Scanning out nondestructively...
[00024351] Scan complete.
[00024351] Read scan reg: 00433a9848400000000010cea613babe
[00024351] R0[00]=08675309  R1[01]=00000000 W0[0]=08675309
[00024351] R0 good.

[00024392] Test Enable is inactive.

[00024431] You has opulence.
```



* run VexRiscv code to write/read the array (monitor I/O for run/error/status bits)

```
make verify-toysram_wb-rtl
...
[00000004] User=Z
[00000004] Test Enable is inactive.
[00000080] Releasing reset.
[00000080] Reset is inactive.
[00005000] ...tick...
[00010000] ...tick...
[00015000] ...tick...
[00017278] User=0
[00017278] Error is inactive.
[00017278] RunMode is active.
[00020000] ...tick...
[00025000] ...tick...
[00026955] User=1
[00030000] ...tick...
[00035000] ...tick...
[00040000] ...tick...
[00045000] ...tick...
[00050000] ...tick...
[00055000] ...tick...
[00060000] ...tick...
[00065000] ...tick...
[00070000] ...tick...
[00075000] ...tick...
[00080000] ...tick...
[00085000] ...tick...
[00090000] ...tick...
[00095000] ...tick...
[00100000] ...tick...
[00105000] ...tick...
[00110000] ...tick...
[00112862] User=2
[00115000] ...tick...
[00120000] ...tick...
[00125000] ...tick...
[00130000] ...tick...
[00135000] ...tick...
[00140000] ...tick...
[00145000] ...tick...
[00150000] ...tick...
[00155000] ...tick...
[00160000] ...tick...
[00165000] ...tick...
[00170000] ...tick...
[00175000] ...tick...
[00180000] ...tick...
[00185000] ...tick...
[00190000] ...tick...
[00195000] ...tick...
[00200000] ...tick...
[00201404] User=3
[00205000] ...tick...
[00210000] ...tick...
[00215000] ...tick...
[00220000] ...tick...
[00225000] ...tick...
[00230000] ...tick...
[00235000] ...tick...
[00240000] ...tick...
[00245000] ...tick...
[00250000] ...tick...
[00255000] ...tick...
[00260000] ...tick...
[00265000] ...tick...
[00270000] ...tick...
[00275000] ...tick...
[00280000] ...tick...
[00285000] ...tick...
[00290000] ...tick...
[00295000] ...tick...
[00300000] ...tick...
[00305000] ...tick...
[00310000] ...tick...
[00315000] ...tick...
[00320000] ...tick...
[00325000] ...tick...
[00330000] ...tick...
[00335000] ...tick...
[00340000] ...tick...
[00345000] ...tick...
[00350000] ...tick...
[00355000] ...tick...
[00360000] ...tick...
[00365000] ...tick...
[00370000] ...tick...
[00375000] ...tick...
[00380000] ...tick...
[00385000] ...tick...
[00387857] RunMode is inactive.

[00387857] You has opulence.


```

Refer to [README](docs/source/index.rst) for this sample project documentation.
